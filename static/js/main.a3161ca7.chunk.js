(this["webpackJsonpeog-graphql"]=this["webpackJsonpeog-graphql"]||[]).push([[0],{228:function(e,t,a){},244:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var n=a(51),r=a(0),c=a(40),i=a.n(c),s=(a(228),a(108)),o=a(80),u=a(186),l=a(93),j=a(112),b=a(208),d=a(423),m=a(424),p=a(31),f=a(189),O=a(212),v=a(43),h=a.n(v),g=a(96),x=a(26),M=a(211),y=a(139),w=a.n(y),D=Object(M.a)({name:"metrics",initialState:{allMetrics:[],multipleMeasurements:{},liveData:{}},reducers:{allMetricsDataRecevied:function(e,t){var a=t.payload.getMetrics;e.allMetrics=a},multipleMeasurementsDataRecevied:function(e,t){e.multipleMeasurements=t.payload},metricLiveDataRecevied:function(e,t){var a;e.liveData=null===(a=[t.payload])||void 0===a?void 0:a.map((function(e){var t;return t={},Object(x.a)(t,e.metric,e.value),Object(x.a)(t,"at",w()(parseInt(e.at)).format("LTS")),Object(x.a)(t,"unit",e.unit),t}))[0]},metricsApiErrorReceived:function(e,t){return e}}}),E=D.reducer,k=D.actions,R=E,A=h.a.mark(C),S=h.a.mark(q);function C(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)(j.b.error,"Error: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),A)}function q(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)(k.metricsApiErrorReceived.type,C);case 2:case"end":return e.stop()}}),S)}var N=h.a.mark(F);function F(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)(q);case 2:case"end":return e.stop()}}),N)}var L=Object(p.combineReducers)({MetricsData:R}),T=(a(243),a(244),a(413)),P=a(411),B=a(412),I=a(409),$=a(11),z=Object(I.a)({grow:{flexGrow:1}}),G=function(){var e=z();return Object($.jsx)(P.a,{position:"static",style:{background:"#48466D"},children:Object($.jsx)(B.a,{children:Object($.jsx)(T.a,{variant:"h6",color:"inherit",className:e.grow,children:"EOG React Visualization Assessment"})})})},J=Object(I.a)({wrapper:{height:"110vh",background:"#F5F5F5"}}),K=function(e){var t=e.children,a=J();return Object($.jsx)("div",{className:a.wrapper,children:t})},H=a(25),Q=a(427),U=a(422),V=a(426),W=a(209),Z=a(414),X=a(415),Y=Object(I.a)({root:{width:"100%",backgroundColor:"#fff",color:"#1f1f1f"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),_=function(e){var t=Y(),a=Object(r.useState)({metric:"",unit:"",value:""}),n=Object(H.a)(a,2),c=n[0],i=n[1],s=[e.liveData].find((function(t){return t.metric===e.info.value})),o=void 0!==s?s:c;return Object(r.useEffect)((function(){void 0!==o&&i(o)}),[o]),Object($.jsx)(Z.a,{className:t.root,children:Object($.jsxs)(X.a,{children:[Object($.jsx)(T.a,{variant:"h6",component:"h4",align:"center",children:e.info.label}),Object($.jsx)(T.a,{className:t.pos,color:"textSecondary",align:"center",variant:"h5",component:"h1",children:"".concat(c.value," - ").concat(c.unit)})]})})},ee=a(76),te=a(416),ae=a(417),ne=a(207),re=a(206),ce=a(421),ie=a(95),se=a(99),oe=a(213),ue=a(139),le=Object(I.a)({root:{justifyContent:"center",marginLeft:"20px",marginRight:"20px"},wrapper:{width:"100%",height:"70vh",minHeight:"300px"}}),je=[],be=[],de={};function me(e){var t=new Map;return e.forEach((function(e){var a=e.at;t.has(a)?t.set(a,Object(ee.a)(Object(ee.a)({},e),t.get(a))):t.set(a,e)})),Array.from(t.values())}var pe=function(e){var t=le(),a=e.data,n=e.liveData,c=e.selectedChartOptions;Object(r.useEffect)((function(){!function(e,t){for(var a=0;a<e.length;a++)for(var n=0;n<e[a].measurements.length;n++)je.push(Object(x.a)({at:ue(e[a].measurements[n].at).format("LTS")},e[a].measurements[n].metric,e[a].measurements[n].value));je.filter((function(e){return de.hasOwnProperty(e.at)?(de[e.at].data.push(e),!1):(Array.isArray(e)||(e.data=[e.data]),de[e.at]=e,!0)})),be=me(je)}(a)}),[a]),Object(r.useEffect)((function(){be.push(n),be=me(be)}),[n]);var i=["#000000","#377eb8","#4daf4a","#984ea3","#ff7f00","#654321","#a65628","#f781bf"];return 0===c.length?Object($.jsx)("p",{style:{textAlign:"center"},children:"Please select atleast one metric from the dropdown"}):Object($.jsx)(Z.a,{className:t.root,children:Object($.jsx)(X.a,{children:Object($.jsx)("div",{className:t.wrapper,children:Object($.jsx)(te.a,{children:Object($.jsxs)(ae.a,{data:be,margin:{top:10,right:50,left:10,bottom:0},children:[Object($.jsx)(ne.a,{type:"number",domain:["auto","auto"],tickCount:30,scale:"linear",padding:{top:10,bottom:10}}),Object($.jsx)(re.a,{dataKey:"at",tickCount:30}),Object($.jsx)(ce.a,{strokeDasharray:"3 3"}),Object($.jsx)(ie.a,{}),Object($.jsx)(se.a,{}),null===c||void 0===c?void 0:c.map((function(e,t){return Object($.jsx)(oe.a,{type:"monotone",dataKey:e.value,stroke:i[t],dot:!1,isAnimationActive:!1},e.value)}))]})})})})})},fe=(new Date).valueOf(),Oe=Object(I.a)((function(e){return Object(V.a)({select:{padding:e.spacing(2)}})})),ve=function(e){var t=e.MetricsData;return{allMetrics:t.allMetrics,multipleMeasurements:t.multipleMeasurements,liveData:t.liveData}},he=function(){var e=Oe(),t=Object(l.b)(),a=Object(r.useState)([]),n=Object(H.a)(a,2),c=n[0],i=n[1],s=Object(r.useState)([]),u=Object(H.a)(s,2),j=u[0],b=u[1],d=Object(l.c)(ve),m=d.allMetrics,p=d.multipleMeasurements,f=d.liveData,O=Object(o.b)({query:"{\n  getMetrics\n  }\n"}),v=Object(H.a)(O,1)[0],h=Object(o.b)({query:"\nquery($input: [MeasurementQuery]){\n  getMultipleMeasurements(input: $input) {\n    metric\n    measurements {\n     at\n     value\n     metric\n     unit\n    }\n  }\n}",variables:{input:m.map((function(e){return{metricName:e,after:fe-18e5,before:fe}}))}}),g=Object(H.a)(h,1)[0],x=Object(o.c)({query:"\n  subscription {\n    newMeasurement{\n      metric\n      at\n      value\n      unit\n    }\n  }\n"}),M=Object(H.a)(x,1)[0];return Object(r.useEffect)((function(){var e=[];m.forEach((function(t){e.push({value:t,label:t.replace(/([A-Z])/g," $1").toUpperCase()})})),b(e)}),[m]),Object(r.useEffect)((function(){var e=v.data,a=v.error;a?t(k.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(k.allMetricsDataRecevied(e))}),[t,v]),Object(r.useEffect)((function(){var e=g.data,a=g.error;a?t(k.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(k.multipleMeasurementsDataRecevied(null===e||void 0===e?void 0:e.getMultipleMeasurements))}),[t,g]),Object(r.useEffect)((function(){var e=M.data,a=M.error;a?t(k.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(k.metricLiveDataRecevied(null===e||void 0===e?void 0:e.newMeasurement))}),[t,M]),null!==g&&void 0!==g&&g.fetching?Object($.jsx)(Q.a,{}):Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(U.a,{container:!0,spacing:3,children:[Object($.jsx)(U.a,{item:!0,xs:3}),Object($.jsx)(U.a,{item:!0,xs:6,children:Object($.jsx)("div",{style:{marginTop:"30px"},children:Object($.jsx)(W.a,{onChange:function(e){i(null===e?[]:e)},isMulti:!0,closeMenuOnSelect:!0,options:j})})})]}),Object($.jsx)(U.a,{container:!0,spacing:1,className:e.select,children:null===c||void 0===c?void 0:c.map((function(e,t){return Object($.jsx)(U.a,{item:!0,xs:2,children:Object($.jsx)(_,{info:e,liveData:M.data.newMeasurement})},t)}))}),Object($.jsx)(U.a,{container:!0,spacing:1,className:e.select}),Object($.jsx)(pe,{data:p,liveData:f,selectedChartOptions:c})]})},ge=function(){var e=Object(f.composeWithDevTools)({}),t=Object(O.a)(),a=Object(p.applyMiddleware)(t),n=Object(p.createStore)(L,e(a));return t.run(F),n}(),xe=Object(b.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),Me=function(){return Object($.jsxs)(d.a,{theme:xe,children:[Object($.jsx)(m.a,{}),Object($.jsx)(l.a,{store:ge,children:Object($.jsxs)(K,{children:[Object($.jsx)(G,{}),Object($.jsx)(he,{}),Object($.jsx)(j.a,{})]})})]})},ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,428)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},we=new u.SubscriptionClient("wss://react.eogresources.com/graphql",{reconnect:!0}),De=Object(s.a)({url:"https://react.eogresources.com/graphql",exchanges:[].concat(Object(n.a)(s.b),[Object(s.c)({forwardSubscription:function(e){return we.request(e)}})])});i.a.render(Object($.jsx)(o.a,{value:De,children:Object($.jsx)(Me,{})}),document.getElementById("root")),ye()}},[[390,1,2]]]);
//# sourceMappingURL=main.a3161ca7.chunk.js.map